Прошивка кассы.

Дорабатываем 4-х номинальный диспенсер (команду 52 обрабатываем как 72).
Исправлена ошибка с подсчетом суммы при инкассации.

Запрос финансового отчета ККМ делаем до закрытия смены.

Добавлен диспенсер 4 номинала.
Модифицирована настройка кассет диспенсера (расширяем до 4 номиналов).
Введено новое сообщение о состоянии кассет диспенсера на 4 номинала.
Модифицированы списки карт доступа: все карты доступа объединены в один список с разными типами.
Добавлены 2 сектора для системы подсчета свободных мест (свой сектор и соседний сектор).

Вызов оператора перенесен в callback кнопки вызова.
Добавлена поддержка 4-строчного дисплея: Настройки -> Общие 2 -> галка "Дисплей 4 строки"
Также добавлены "Строка производителя оборудования" и "Информационная строка".
"Строка производителя оборудования" - выводится при старте стойки на короткое время и постоянно 4-й строкой.
"Информационная строка" - выводится постоянно 3-й строкой.

Добавлено сообщение при оплате по акцептированому билету.

Выдача купюр диспенсером организована с наибольшего номинала в любой корзине.

Модифицировано приветствие "Поднесите штрих-код" (убрано про карту "или карту").

Термин "штраф" заменен на "утрата билета".

Добавлена возможность приема не полных платежей по запросу извне.

Отключена блокировка и перезапуск купюроприемника по заклиниванию в акцепторе.
Отключен перезапуск купюроприемника по ошибке команды.
Добавлена версия тайваньского диспенсера "6I".
В случае не совпадения версий диспенсера, выдает ошибку с данными о несовпадающей версии.
Модифицирован код диспенсера.
В начало инкассации добавлены стекер биллакцептора и коробки диспенсера.
Сдача выдается последовательно, начиная с максимального номинала купюр.

Задержка на подготовку к работе ККМ - 10 сек.

Для коректной работы стойка кассы должна иметь номер от 8.

Платежи по запросу сервера.
Безналичные платежи.
Работа ККМ дополнена возможностью автоматического закрытия смены в заданное время.
Добавлена очередь печати копий Z-отчетов (запрос с сервера, печать по кнопке).

Настройка контроля состояния карт доступа (на парковке / вне парковки):
 "Общие"->"Отключить проверку состояния карты доступа".
Широковещательная рассылка времени (раз в 3~5 минут):
 "Время работы"->"Широковещательная рассылка времени".

Билеты, напечатаные на терминале 15 (билеты для арендаторов) и укладывающиеся в срок действия - не оплачиваются.
Настройка срока действия билетов арендаторов:
 "Время работы"->"Срок действия билетов арендаторов", или непосредственно с web.

==================================================

IP по умолчанию: 192.168.0.93

Кнопки:
B1 - сброс (отказ от платежа)
B2 - вызов оператора
B3 - разблокировка
B4 - инкасация
B5 - Z-Report
B6 - X-Report
B7 - запрос оплаты штрафа

Датчики:
S1 - печать копий Z-отчетов
S6 - оплата наличными
S7 - оплата по банковской карте

Реле:
не задействовано

Оборудование:
USB - Платежный терминал UPT7000 (протокол Сбербанка)
COM1 - ККМ
COM2 - Диспенсер (LCDM2000)
COM3 - Купюроприемник (ID003)
COM4 - Считыватель штрихкодов
Card Reader - бесконтактный считыватель Wiegand
RS485 - табло
Звук.

==================================================
